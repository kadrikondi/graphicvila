{"version":3,"sources":["../../server/routes/index.js"],"names":["express","require","router","Router","usercontroller","graphicscontroller","cloudinary","multer","config","cloud_name","api_key","api_secret","console","log","storage","diskStorage","filename","req","file","cb","Date","now","originalname","imageFilter","match","upload","fileFilter","get","getAllusers","getSingleUser","post","loginUser","registerUser","put","single","updateUser","delete","deletUser","getAllGraphics","getSingleGraphic","deleteGraphic","updateGraphic","userPostNewGraphics","module","exports"],"mappings":";;AAAA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,SAASF,QAAQG,MAAR,EAAf;AACA,IAAMC,iBAAiBH,QAAQ,qBAAR,CAAvB;AACA,IAAMI,qBAAqBJ,QAAQ,wBAAR,CAA3B;AACA,IAAMK,aAAaL,QAAQ,YAAR,CAAnB;AACA,IAAMM,SAASN,QAAQ,QAAR,CAAf;AACA,IAAMO,SAASP,QAAQ,kBAAR,CAAf;;AAEAK,WAAWE,MAAX,CAAkB;AACdC,gBAAYD,OAAOC,UADL;AAEdC,aAAUF,OAAOE,OAFH;AAGdC,gBAAaH,OAAOG;AAHN,CAAlB;AAKAC,QAAQC,GAAR,CAAYL,OAAOE,OAAP,GAAiB,UAA7B;AACA,IAAMI,UAAUP,OAAOQ,WAAP,CAAmB;AAC/BC,cAAS,kBAASC,GAAT,EAAcC,IAAd,EAAoBC,EAApB,EAAuB;AAC5BA,WAAG,IAAH,EAASC,KAAKC,GAAL,KAAWH,KAAKI,YAAzB;AACH;AAH8B,CAAnB,CAAhB;;AAMA,IAAMC,cAAc,SAAdA,WAAc,CAASN,GAAT,EAAcC,IAAd,EAAoBC,EAApB,EAAuB;AACvC,QAAG,CAACD,KAAKI,YAAL,CAAkBE,KAAlB,CAAwB,oBAAxB,CAAJ,EAAkD;AAC9C,eAAOL,GAAG,8BAAH,EAAmC,KAAnC,CAAP;AACH,KAFD,MAGI;AACAA,WAAG,IAAH,EAAQ,IAAR;AACH;AACJ,CAPD;AAQA,IAAMM,SAASlB,OAAO;AAClBO,aAAQA,OADU;AAElBY,gBAAWH;AAFO,CAAP,CAAf;;AAKA;AACArB,OAAOyB,GAAP,CAAW,eAAX,EAA4BvB,eAAewB,WAA3C;AACA1B,OAAOyB,GAAP,CAAW,kBAAX,EAA+BvB,eAAeyB,aAA9C;AACA3B,OAAO4B,IAAP,CAAY,oBAAZ,EAAkC1B,eAAe2B,SAAjD;AACA7B,OAAO4B,IAAP,CAAY,uBAAZ,EAAqC1B,eAAe4B,YAApD;AACA9B,OAAO+B,GAAP,CAAW,yBAAX,EAAsCR,OAAOS,MAAP,CAAc,OAAd,CAAtC,EAA8D9B,eAAe+B,UAA7E;AACAjC,OAAOkC,MAAP,CAAc,yBAAd,EAAyChC,eAAeiC,SAAxD;;AAEA;AACAnC,OAAOyB,GAAP,CAAW,kBAAX,EAA+BtB,mBAAmBiC,cAAlD;AACApC,OAAOyB,GAAP,CAAW,qBAAX,EAAkCtB,mBAAmBkC,gBAArD;AACArC,OAAOkC,MAAP,CAAc,4BAAd,EAA4C/B,mBAAmBmC,aAA/D;AACAtC,OAAO+B,GAAP,CAAW,4BAAX,EAAyC5B,mBAAmBoC,aAA5D;AACAvC,OAAO4B,IAAP,CAAY,0BAAZ,EAAwCL,OAAOS,MAAP,CAAc,MAAd,CAAxC,EAA+D7B,mBAAmBqC,mBAAlF;;AAGAC,OAAOC,OAAP,GAAiB1C,MAAjB","file":"index.js","sourcesContent":["const express = require('express')\r\nconst router = express.Router()\r\nconst usercontroller = require('../controllers/user')\r\nconst graphicscontroller = require('../controllers/graphic')\r\nconst cloudinary = require('cloudinary')\r\nconst multer = require('multer')\r\nconst config = require('../config/config')\r\n\r\ncloudinary.config({\r\n    cloud_name: config.cloud_name,\r\n    api_key : config.api_key,\r\n    api_secret : config.api_secret\r\n})\r\nconsole.log(config.api_key + ' api key')\r\nconst storage = multer.diskStorage({\r\n    filename:function(req, file, cb){\r\n        cb(null, Date.now()+file.originalname)\r\n    }\r\n})\r\n\r\nconst imageFilter = function(req, file, cb){\r\n    if(!file.originalname.match(/\\.(jpeg|jpg|png)$/i)){\r\n        return cb('Only image files are allowed', false)\r\n    }\r\n    else{\r\n        cb(null,true)\r\n    }\r\n}\r\nconst upload = multer({\r\n    storage:storage,\r\n    fileFilter:imageFilter\r\n})\r\n\r\n//user routes\r\nrouter.get('/api/v1/users', usercontroller.getAllusers)\r\nrouter.get('/api/v1/user/:id', usercontroller.getSingleUser)\r\nrouter.post('/api/v1/user/login', usercontroller.loginUser)\r\nrouter.post('/api/v1/user/register', usercontroller.registerUser)\r\nrouter.put('/api/v1/user/update/:id', upload.single('photo'), usercontroller.updateUser)\r\nrouter.delete('/api/v1/user/delete/:id', usercontroller.deletUser)\r\n\r\n//graphics routes\r\nrouter.get('/api/v1/graphics', graphicscontroller.getAllGraphics)\r\nrouter.get('/api/v1/graphic/:id', graphicscontroller.getSingleGraphic)\r\nrouter.delete('/api/v1/graphic/delete/:id', graphicscontroller.deleteGraphic)\r\nrouter.put('/api/v1/graphic/update/:id', graphicscontroller.updateGraphic)\r\nrouter.post('/api/v1/graphic/post/:id', upload.single('file'), graphicscontroller.userPostNewGraphics)\r\n\r\n\r\nmodule.exports = router;\r\n"]}